<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lead Scraper</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='modern_style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="minimal">
    <div class="app-container minimal-container">
        <header class="minimal-header">Lead Scraper <span class="mini-sub">Fast GitHub email extraction</span></header>
        <main class="minimal-main">
            <section class="minimal-config">
                <form id="scrapeForm" class="minimal-form">
                    <label class="minimal-label" for="queries">Queries (one per line)</label>
                    <textarea id="queries" rows="6" class="minimal-input" placeholder="electron stars:>25&#10;unity plugin stars:>30"></textarea>
                    <div class="mini-hint">Use GitHub search syntax (e.g. <code>language:go stars:>50 cli</code>)</div>
                    <div class="sample-row">
                        <select id="sampleSelect" class="minimal-input mini-select">
                            <option value="" disabled selected>Insert sample query set...</option>
                            <option value="electron stars:>25\nunity plugin stars:>30\nblender addon stars:>20">Desktop / Plugins</option>
                            <option value="cli tool language:go stars:>40\n"upgrade" language:typescript stars:>60">CLI & Upgrade</option>
                            <option value="blender addon stars:>25\nfigma plugin stars:>30">Design Extensions</option>
                        </select>
                        <button type="button" id="insertSamples" class="minimal-btn">Insert</button>
                    </div>
                    <div class="minimal-row">
                        <div class="minimal-field">
                            <label class="minimal-sublabel" for="token">Token</label>
                            <input type="password" id="token" class="minimal-input" placeholder="ghp_...">
                        </div>
                        <div class="minimal-field">
                            <label class="minimal-sublabel" for="maxRepos">Max Repos</label>
                            <input type="number" id="maxRepos" class="minimal-input" value="30" min="1" max="100">
                        </div>
                        <div class="minimal-field">
                            <label class="minimal-sublabel" for="outputFilename">Filename</label>
                            <input type="text" id="outputFilename" class="minimal-input" value="leads.csv">
                        </div>
                    </div>

                    <div class="minimal-actions">
                        <button type="submit" id="startBtn" class="minimal-btn primary">
                            <span id="startLabel">Start</span>
                            <span class="mini-spinner" id="loadingSpinner"></span>
                        </button>
                        <button type="button" id="clearBtn" class="minimal-btn" disabled>Clear</button>
                        <button type="button" id="downloadBtn" class="minimal-btn" disabled>Download</button>
                    </div>

                    <div id="errorBanner" class="minimal-error" style="display:none;">
                        <span id="errorMessage"></span>
                    </div>

                    <div id="progressContainer" class="mini-progress" style="display:none;">
                        <div class="mini-bar">
                            <div id="progressFill" class="mini-fill"></div>
                        </div>
                        <div id="progressText" class="mini-text">Ready</div>
                    </div>

                    <div class="mini-stats" id="miniStats">
                        <div><strong id="totalLeads">0</strong> leads</div>
                        <div><span id="currentQuery">0/0</span> queries</div>
                        <div><span id="progressPercent">0%</span> done</div>
                    </div>
                </form>
            </section>

            <section class="minimal-results">
                <table class="minimal-table" id="resultsTable">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Name</th>
                            <th>Repository</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                        <tr class="empty-state">
                            <td colspan="3" class="empty-cell">No leads yet</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>
        <footer class="minimal-footer">&copy; 2025 â€¢ Minimal mode</footer>
    </div>
    <script src="{{ url_for('static', filename='modern_script.js') }}"></script>
</body>
</html>
